<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¶£å‘³ä¸€ä¸‹ - ä¸å»¢äººç”Ÿå¯¦é©—å®¤</title>
    <link rel="stylesheet" href="app.css?v=2.0">
</head>
<body>
    <div class="container">
        <header>
            <h1>ä¸å»¢äººç”Ÿå¯¦é©—å®¤</h1>
            <div class="score-display">
                <span class="score-label">ç•¶å‰ç©åˆ†ï¼š</span>
                <span class="score-value" id="currentScore">0</span>
            </div>
            <a href="index.html" class="back-link">â† è¿”å›é¦–é </a>
        </header>

        <nav class="page-nav">
            <div class="nav-tabs">
                <a href="fun.html" class="nav-item active">è¶£å‘³ä¸€ä¸‹</a>
                <a href="tasks.html" class="nav-item">ä»»å‹™æ—¥èªŒ</a>
                <a href="ai-breakdown.html" class="nav-item">AI ä»»å‹™æ‹†è§£</a>
                <a href="ai-diagnosis.html" class="nav-item">AI æ‹–å»¶è¨ºæ–·</a>
                <a href="rewards.html" class="nav-item">çå‹µè¨­å®š</a>
                <a href="gacha.html" class="nav-item">ä»»å‹™çå‹µæ‰­è›‹</a>
            </div>
            
            <!-- è¶£å‘³ä¸€ä¸‹åŠŸèƒ½å€åŸŸ -->
            <div class="fun-section">
                <!-- ä»»å‹™ç›²ç›’ -->
                <div class="fun-card">
                    <h3>ğŸ“¦ ä»»å‹™ç›²ç›’</h3>
                    <p class="fun-description">éš¨æ©ŸæŠ½å–ä¸€å€‹æœªå®Œæˆçš„ä»»å‹™ï¼Œè®“ä»»å‹™æ›´æœ‰è¶£ï¼</p>
                    <button id="drawTaskBtn" class="fun-button">æŠ½å–ä»»å‹™</button>
                    <div id="taskResult" class="fun-result" style="display: none;">
                        <div class="result-content">
                            <h4>æŠ½åˆ°çš„ä»»å‹™ï¼š</h4>
                            <p id="drawnTaskTitle" class="drawn-task-title"></p>
                            <p id="drawnTaskInfo" class="drawn-task-info"></p>
                        </div>
                    </div>
                </div>
                
                <!-- ä»Šæ—¥æ¢—åœ– -->
                <div class="fun-card">
                    <h3>ğŸ˜„ ä»Šæ—¥æ¢—åœ–</h3>
                    <p class="fun-description">éš¨æ©ŸæŠ½å–ä¸€å¼µæœ‰è¶£çš„æ¢—åœ–ï¼Œæ”¾é¬†ä¸€ä¸‹å¿ƒæƒ…ï¼</p>
                    <button id="drawMemeBtn" class="fun-button">æŠ½å–æ¢—åœ–</button>
                    <div id="memeResult" class="fun-result" style="display: none;">
                        <div class="result-content">
                            <img id="memeImage" src="" alt="æ¢—åœ–" class="meme-image">
                        </div>
                    </div>
                </div>
            </div>
        </nav>
    </div>

    <script src="app.js"></script>
    <script>
        // é é¢ç‰¹å®šçš„åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            console.log('è¶£å‘³ä¸€ä¸‹é é¢åˆå§‹åŒ–...');
            
            window.updateDisplay = function() {
                updateScore();
            };
            
            // ä»»å‹™ç›²ç›’æŒ‰éˆ•
            const drawTaskBtn = document.getElementById('drawTaskBtn');
            if (drawTaskBtn) {
                drawTaskBtn.addEventListener('click', drawRandomTask);
            }
            
            // æ¢—åœ–æŒ‰éˆ•
            const drawMemeBtn = document.getElementById('drawMemeBtn');
            if (drawMemeBtn) {
                drawMemeBtn.addEventListener('click', drawRandomMeme);
            }
            
            loadData();
            console.log('è¶£å‘³ä¸€ä¸‹é é¢åˆå§‹åŒ–å®Œæˆ');
        });
        
        // æŠ½å–éš¨æ©Ÿä»»å‹™
        function drawRandomTask() {
            const uncompletedTasks = tasks.filter(task => !task.completed);
            
            if (uncompletedTasks.length === 0) {
                alert('ç›®å‰æ²’æœ‰æœªå®Œæˆçš„ä»»å‹™ï¼');
                return;
            }
            
            // éš¨æ©ŸæŠ½å–ä¸€å€‹ä»»å‹™
            const randomIndex = Math.floor(Math.random() * uncompletedTasks.length);
            const drawnTask = uncompletedTasks[randomIndex];
            
            // é¡¯ç¤ºçµæœ
            const taskResult = document.getElementById('taskResult');
            const drawnTaskTitle = document.getElementById('drawnTaskTitle');
            const drawnTaskInfo = document.getElementById('drawnTaskInfo');
            
            if (taskResult && drawnTaskTitle && drawnTaskInfo) {
                drawnTaskTitle.textContent = drawnTask.title;
                
                // é¡¯ç¤ºä»»å‹™è©³æƒ…
                const deadline = new Date(drawnTask.deadline);
                const deadlineStr = deadline.toLocaleDateString('zh-TW', { 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric' 
                });
                
                const priorityMap = {
                    'low': 'ä½',
                    'medium': 'ä¸­',
                    'high': 'é«˜'
                };
                
                drawnTaskInfo.textContent = `æˆªæ­¢æ—¥æœŸï¼š${deadlineStr} | å„ªå…ˆåº¦ï¼š${priorityMap[drawnTask.priority] || drawnTask.priority}`;
                taskResult.style.display = 'block';
                
                // æ·»åŠ å‹•ç•«æ•ˆæœ
                taskResult.style.animation = 'fadeInUp 0.5s ease-out';
            }
        }
        
        // æŠ½å–éš¨æ©Ÿæ¢—åœ–
        function drawRandomMeme() {
            const memeResult = document.getElementById('memeResult');
            const memeImage = document.getElementById('memeImage');
            
            if (!memeResult || !memeImage) return;
            
            // æœ¬åœ°æ¢—åœ–åˆ—è¡¨ï¼ˆæ ¹æ“š images/memes è³‡æ–™å¤¾ä¸­çš„åœ–ç‰‡ï¼‰
            const memeImages = [
                '/images/memes/1.jpg',
                '/images/memes/2.jpg',
                '/images/memes/3.jpg',
                '/images/memes/4.jpg',
                '/images/memes/5.jpg',
                '/images/memes/6.jpg'
            ];
            
            // éš¨æ©Ÿé¸æ“‡ä¸€å¼µæ¢—åœ–
            const randomIndex = Math.floor(Math.random() * memeImages.length);
            const selectedMeme = memeImages[randomIndex];
            
            // é¡¯ç¤ºçµæœ
            memeImage.src = selectedMeme;
            memeImage.alt = 'ä»Šæ—¥æ¢—åœ–';
            memeResult.style.display = 'block';
            memeResult.style.animation = 'fadeInUp 0.5s ease-out';
        }
    </script>
</body>
</html>

