<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä»»å‹™çå‹µæ‰­è›‹ - ä¸å»¢äººç”Ÿå¯¦é©—å®¤</title>
    <link rel="stylesheet" href="app.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>ä¸å»¢äººç”Ÿå¯¦é©—å®¤</h1>
            <div class="score-display">
                <span class="score-label">ç•¶å‰ç©åˆ†ï¼š</span>
                <span class="score-value" id="currentScore">0</span>
            </div>
            <a href="index.html" class="back-link">â† è¿”å›é¦–é </a>
        </header>

        <nav class="page-nav">
            <div class="nav-tabs">
                <a href="fun.html" class="nav-item">è¶£å‘³ä¸€ä¸‹</a>
                <a href="tasks.html" class="nav-item">ä»»å‹™æ—¥èªŒ</a>
                <a href="ai-breakdown.html" class="nav-item">AI ä»»å‹™æ‹†è§£</a>
                <a href="ai-diagnosis.html" class="nav-item">AI æ‹–å»¶è¨ºæ–·</a>
                <a href="rewards.html" class="nav-item">çå‹µè¨­å®š</a>
                <a href="gacha.html" class="nav-item active">ä»»å‹™çå‹µæ‰­è›‹</a>
            </div>
            <!-- æ‰­è›‹é¡¯ç¤ºæ•´åˆåˆ°å°èˆªå€ -->
            <div class="gacha-display">
                <div class="gacha-machine" id="gachaMachine"></div>
                <div class="gacha-buttons-wrapper">
                    <div class="gacha-button-item">
                        <div class="tooltip-container">
                            <button id="normalGachaBtn" class="gacha-button" data-type="normal" disabled>ä¸€èˆ¬æŠ½ç</button>
                            <span class="tooltip-text" id="normalGachaTooltip"></span>
                        </div>
                        <p class="gacha-note note-normal">ä¸€èˆ¬æŠ½çç‚º10~20ç©åˆ†æŠ½ä¸€æ¬¡</p>
                    </div>
                    <div class="gacha-button-item">
                        <div class="tooltip-container">
                            <button id="luxuryGachaBtn" class="gacha-button" data-type="luxury" disabled>è±ªè¯æŠ½ç</button>
                            <span class="tooltip-text" id="luxuryGachaTooltip"></span>
                        </div>
                        <p class="gacha-note note-luxury">è±ªè¯æŠ½çç‚º50ç©åˆ†æŠ½ä¸€æ¬¡</p>
                    </div>
                    <div class="gacha-button-item">
                        <div class="tooltip-container">
                            <button id="premiumGachaBtn" class="gacha-button" data-type="premium" disabled>é ‚ç´šæŠ½ç</button>
                            <span class="tooltip-text" id="premiumGachaTooltip"></span>
                        </div>
                        <p class="gacha-note note-premium">é ‚ç´šæŠ½çç‚º100ç©åˆ†æŠ½ä¸€æ¬¡</p>
                    </div>
                </div>
            </div>
        </nav>
    </div>

    <!-- æŠ½ççµæœå½ˆçª— -->
    <div id="gachaResultModal" class="gacha-modal">
        <div class="gacha-modal-content">
            <div class="confetti-container" id="confettiContainer"></div>
            <div class="gacha-modal-body">
                <div class="gacha-result-icon">ğŸ‰</div>
                <h2 class="gacha-result-title">æ­å–œç²å¾—ï¼</h2>
                <div class="gacha-result-reward" id="gachaResultReward"></div>
                <button class="gacha-modal-close" onclick="closeGachaModal()">ç¢ºå®š</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
    <script>
        // é é¢ç‰¹å®šçš„åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            // åªæ›´æ–°æ‰­è›‹ç›¸é—œçš„é¡¯ç¤º
            window.updateDisplay = function() {
                updateScore();
                updateGachaButton();
            };
            
            // ç¢ºä¿äº‹ä»¶ç›£è½å™¨å·²ç¶å®š
            const normalGachaBtn = document.getElementById('normalGachaBtn');
            const luxuryGachaBtn = document.getElementById('luxuryGachaBtn');
            const premiumGachaBtn = document.getElementById('premiumGachaBtn');
            
            if (normalGachaBtn) {
                normalGachaBtn.addEventListener('click', () => drawGacha('normal'));
            }
            if (luxuryGachaBtn) {
                luxuryGachaBtn.addEventListener('click', () => drawGacha('luxury'));
            }
            if (premiumGachaBtn) {
                premiumGachaBtn.addEventListener('click', () => drawGacha('premium'));
            }
            
            // é»æ“Šå½ˆçª—å¤–éƒ¨é—œé–‰
            const gachaModal = document.getElementById('gachaResultModal');
            if (gachaModal) {
                gachaModal.addEventListener('click', function(e) {
                    if (e.target === gachaModal) {
                        closeGachaModal();
                    }
                });
            }
            
            // ESC éµé—œé–‰å½ˆçª—
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    closeGachaModal();
                }
            });
            
            loadData();
        });
    </script>
</body>
</html>

